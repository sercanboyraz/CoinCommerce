"use strict";function giftCardBoxContext(n,t,i,r,u){function s(i){n.$broadcast("giftCardBoxContextChanging",{applyGiftCard:!0});r.applyGiftCard(i).then(function(t){f=t.data;e.setState(f);n.$broadcast("giftCardBoxContextChanged",{isGiftCardApplied:f.isApplied})},function(i){return f=e.getLastState(),n.$broadcast("giftCardBoxContextChanged"),t.reject(i)})}function h(i){n.$broadcast("giftCardBoxContextChanging",{removeGiftCard:!0});r.removeGiftCard(i).then(function(t){f=t.data;e.setState(f);n.$broadcast("giftCardBoxContextChanged",{isGiftCardRemoved:!0})},function(i){return f=e.getLastState(),n.$broadcast("giftCardBoxContextChanged"),t.reject(i)})}function c(n){f=n.orderSummary.giftCardBox;e.setState(f)}function l(){return f}function a(n){n.applyGiftCard&&s(n.giftCardCouponCode);n.removeGiftCard&&h(n.giftCardId)}var o={init:c,get:l,set:a},f,e=u.instance();return o}angular.module("realOnePageCheckout.giftCardBox").factory("giftCardBoxContext",giftCardBoxContext);giftCardBoxContext.$inject=["$rootScope","$q","api","giftCardBoxService","stateHolder"];