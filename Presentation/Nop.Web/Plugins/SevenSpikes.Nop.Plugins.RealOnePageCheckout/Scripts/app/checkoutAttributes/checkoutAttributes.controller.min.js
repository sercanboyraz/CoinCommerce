"use strict";function CheckoutAttributesController(n,t,i,r,u){function o(){for(var n,i,t=0;t<f.checkoutAttributesData.length;t++)n=f.checkoutAttributesData[t],n.attributeControlType=="Datepicker"&&n.selectedDay>0&&n.selectedMonth>0&&n.selectedYear>0&&(f.modelsData[n.id]||(f.modelsData[n.id]={}),f.modelsData[n.id].day=n.selectedDay,f.modelsData[n.id].month=f.months[n.selectedMonth-1],f.modelsData[n.id].year=n.selectedYear),n.values&&n.values.length>0&&(n.haveRequiredOption=n.isRequired,i=$.grep(n.values,function(n){return n.isPreSelected}),n.attributeControlType=="RadioList"||n.attributeControlType=="Checkboxes"?i.length>0&&(n.haveRequiredOption=!1):n.attributeControlType=="DropdownList"&&(f.modelsData[n.id]||(f.modelsData[n.id]={}),i.length>0?f.modelsData[n.id].dropdownListModel=i[0]:n.isRequired&&(f.modelsData[n.id].dropdownListModel=n.values[0])))}function h(){var n=!0;t.$watch("vm.checkoutAttributesData",function(t,i){t&&i&&!n?setTimeout(function(){r.set(t)}):n=!1},!0)}var f=this,s,e;for(f.checkoutAttributesData=[],n.$on("checkoutDataLoaded",function(n,t){r.init(t);var i=r.get();angular.copy(i,f.checkoutAttributesData);f.checkoutAttributesData.length>0&&!angular.isDefined(f.modelsData)&&(f.modelsData={},o());h()}),n.$on("refresh",function(n,t){if(!(t.controller==undefined||t.controller=="CheckoutAttributesController"))return!1;var i=r.get();angular.copy(i,f.checkoutAttributesData);f.checkoutAttributesData.length>0&&!angular.isDefined(f.modelsData)&&(f.modelsData={},o());u.hideOverlay(".checkout-attributes-loader")}),n.$on("setCheckoutAttributesOverlay",function(){u.showOverlay(".checkout-attributes-loader")}),f.hasAvailableAttributes=function(){for(var n,i=!1,t=0;t<f.checkoutAttributesData.length;t++)n=f.checkoutAttributesData[t],i|=n.customProperties.enabled&&n.attributeControlType!="FileUpload"&&n.attributeControlType!="ColorSquares";return i},f.days=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],f.months=[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],f.years=[],s=(new Date).getFullYear(),e=0;e<2;e++)f.years.push(s+e)}angular.module("realOnePageCheckout.checkoutAttributes").controller("CheckoutAttributesController",CheckoutAttributesController);CheckoutAttributesController.$inject=["$rootScope","$scope","$window","checkoutAttributesContext","objectUtility"];